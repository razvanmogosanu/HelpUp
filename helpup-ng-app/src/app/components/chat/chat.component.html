<div class="container">

  <!-- History conversations -->
  <div id="conversations">
    <h3 id="your-conversations">Your conversations</h3>
    <div id="history" *ngFor="let conversation of conversations" >

      <div id="{{getCssForAConversation(conversation)}}" (click)="openConversation(conversation)">
        <img [src]="translateImage(conversation.icon)" id="profile-pictures">
        <div id="conversations-username">{{whoAmITalkingTo(conversation)}}</div>
      </div>

    </div>
  </div>

  <div *ngIf="whereAmIComingFrom() == '' then thenBlock else elseBlock"></div>

  <!-- Welcome message-->
  <ng-template #thenBlock>
    <div id="welcome">
      <h2 id="welcome-title">Welcome to HelpUp Messages!</h2>
      <h4 class="welcome-text">This page will help you communicate with other users in order to give or receive pet
        therapy.</h4>
      <h4 class="welcome-text">You can find anyone you talked to in the past and send them messages in the <i>Your conversations</i> box.</h4>
    </div>
  </ng-template>

  <!-- Conversation -->
  <ng-template #elseBlock >
    <!-- messages -->
    <div id="conversation">
      <div id="conversation-username-box">
        <div *ngIf="this.chosenConversation !== undefined">
          <img id="talking-to-image" [src]="this.translateImage(chosenConversation.icon)">
          <p id="talking-to-username">{{this.chosenConversation.to}}</p>
        </div>
      </div>
      <div id="messages">
        <div *ngIf="chosenConversation != undefined">
          <div *ngFor="let chat of chosenConversation.chat">
            <div id="message-received" *ngIf="chat.sender === whereAmIComingFrom()"> {{chat.message}}</div>
            <div *ngIf="chat.receiver === whereAmIComingFrom()">
              <div id="message-sent">{{chat.message}}</div>
            </div>
          </div>
        </div>
      </div>
      <!-- write message -->
      <div id="write">
        <input #messageInput type="text" id="input-message" placeholder="Type a message...">
        <button (click)="submitMessage()" class="btn" id="send-button">SEND</button>
      </div>

    </div>

  </ng-template>

</div>

<div style="height: 180px"></div>
