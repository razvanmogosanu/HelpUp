<div class="profile">

  <!-- Show first and last name -->
  <h2 *ngIf="!editMode">{{this.userDetails.firstname}} {{this.userDetails.lastname}}</h2>

  <!-- When editing first and last name -->
  <div *ngIf="editMode" class="edit-name">
    <input class="name-input" #firstname (change)="userDetails.firstname = firstname.value"
           value="{{this.userDetails.firstname}}">
    <input class="name-input" #lastname (change)="userDetails.lastname = lastname.value"
           value="{{this.userDetails.lastname}}">
  </div>

  <h3 class="username">@{{this.userDetails.username}}</h3>

  <div class="profile_pic" (mouseenter)="onPhotoMode = true;" (mouseleave)="onPhotoMode = false;" >
    <input  style="display: none" type="file" accept="image/*" #file>

    <div *ngIf="onPhotoMode" style="position: absolute; transform: translateY(400%);
            margin-left: 10%; display: inline-block;" (click)="file.click()">edit
    </div>

    <img *ngIf="userDetails.profilepic != null" src="{{userDetails.profilepic}}">
    <img *ngIf="userDetails.profilepic == null" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
      style="border-radius: 50%;width: 100%" (click)="file.click()">
  </div>

  <div>
    <button *ngIf="!isMine()" class="btn message">Message</button>
    <button *ngIf="isMine() && !editMode" class="btn btn-light" (click)="editDetails()">Edit</button>
    <button class="btn btn-light" *ngIf="editMode" (click)="saveEdit()">Save</button>
  </div>
</div>


<form  class="infos">
  <h4>About me</h4>

  <!-- Edit fields -->
  <div *ngIf="editMode; then editModeOn else editModeOff"></div>
  <ng-template #editModeOn>
    <div>
      <input #description (change)="userDetails.description = description.value"
             value="{{this.userDetails.description}}">
    </div>

    <hr>

    <div class="edit-field">
      <span class="glyphicon glyphicon-home edit-span"></span>
      <input #city (change)="userDetails.city = city.value" value="{{this.userDetails.city}}">
    </div>


    <div class="edit-field">
      <span class="glyphicon glyphicon-education edit-span"></span>
        <input #education (change)="userDetails.education = education.value" value="{{this.userDetails.education}}">
    </div>

    <div class="edit-field">
      <span class="glyphicon glyphicon-briefcase edit-span"></span>
        <input #job (change)="userDetails.job = job.value" value="{{this.userDetails.job}}">
    </div>

    <div class="edit-field">
      <span class="glyphicon glyphicon-earphone edit-span"></span>
        <input #phonenumber (change)="userDetails.phonenumber = phonenumber.value" value="{{this.userDetails.phonenumber}}">
    </div>
  </ng-template>

  <!-- Appearing fields -->
  <ng-template #editModeOff>
    <p>{{this.userDetails.description}}</p>

    <hr>

    <div *ngIf="this.userDetails.city != null && this.userDetails.city.length > 0">
      <span class="glyphicon glyphicon-home"></span>
      <p>Lives in {{this.userDetails.city}}</p>
    </div>

    <div *ngIf="this.userDetails.education != null && this.userDetails.education.length > 0">
      <span class="glyphicon glyphicon-education"></span>
      <p>Studied at {{this.userDetails.education}}</p>
    </div>

    <div *ngIf="this.userDetails.job != null && this.userDetails.job.length > 0">
      <span class="glyphicon glyphicon-briefcase"></span>
      <p>Works at {{this.userDetails.job}}</p>
    </div>

    <div *ngIf="this.userDetails.phonenumber != null && this.userDetails.phonenumber.length > 0">
      <span class="glyphicon glyphicon-earphone"></span>
      <p>Call at {{this.userDetails.phonenumber}}</p>
    </div>
  </ng-template>
</form>

<div *ngFor="let post of retrievedPosts">
  {{post.description}}
</div>

<div style="height: 90px"></div>
